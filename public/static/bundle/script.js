(()=>{"use strict";const t=function(){function t(t){this.$postit_stk=t,this.drawPostits()}return t.prototype.drawPostits=function(){},t}();function e(t,e){var i=JSON.stringify(e);localStorage.setItem(t,i)}const i=function(){function t(t){this.navList=[],this.last_page_id=0,this.$Nav=t,this.$NavPages=this.$Nav.querySelector(".page-nav-tab"),this.$NavAddButton=this.$Nav.querySelector(".add-tab-button"),this.addNewPage=this.addNewPage.bind(this),this.drowNav=this.drowNav.bind(this),this.deletePage=this.deletePage.bind(this),this.initNav()}return t.prototype.initNav=function(){this.fetchData(),this.$NavAddButton.addEventListener("click",this.addNewPage),this.drowNav()},t.prototype.fetchData=function(){var t,e=(t="page_list",JSON.parse(localStorage.getItem(t)));console.log("!!!!!!!!!!!!!! page",e),e&&e.length&&(this.navList=e,this.last_page_id=this.navList[this.navList.length-1].page_id)},t.prototype.addNewPage=function(){this.navList.push({page_id:this.last_page_id+1,page_name:"untitled",total_count:0,todo_count:0,ing_count:0,complete_count:0}),e("page_list",this.navList),this.drowNav()},t.prototype.clickPage=function(t){var e=t.id;console.log(e)},t.prototype.deletePage=function(t){t.preventDefault();var i=t.target.id,n=this.navList.findIndex((function(t){return String(t.page_id)===i}));this.navList.splice(n,1),e("page_list",this.navList),this.drowNav()},t.prototype.drowNav=function(){var t=this;this.$NavPages.innerHTML="\n    ".concat(this.navList.map((function(t,e){return"<div class='tab'>\n        ".concat(t.page_name,'\n        <div class="tab-delete-button" id="').concat(t.page_id,'">🗑</div>\n        </div>')})).join(""),"\n    "),this.$NavPages.querySelectorAll(".tab-delete-button").forEach((function(e){e.addEventListener("click",t.deletePage),e.parentElement.addEventListener("click",(function(){return t.clickPage(e)}))}))},t}();function n(t){document.addEventListener("mousemove",o);var e=t.target.parentElement,i=document.querySelectorAll(".postit"),n=e.classList;if(!n.contains("hold")){var a=t.clientX,s=t.clientY,r=e.getBoundingClientRect(),c=a-r.x,u=s-r.y;e.setAttribute("gap-x",String(c)),e.setAttribute("gap-y",String(u));var l=String((i.length>0?Math.max.apply(null,Array.from(i).map((function(t){return Number(t.getAttribute("priority"))}))):9999)+1);e.setAttribute("priority",l),e.style.zIndex=l,n.add("hold")}}function o(t){t.preventDefault();var e=document.querySelector(".postit.hold");if(e){var i=t.clientX,n=t.clientY,o=e.getAttribute("gap-x"),a=e.getAttribute("gap-y"),s=i-Number(o),r=n-Number(a);e.style.left=s+"px",e.style.top=r+"px"}}var a={page_id:1,page_name:"개발공부",postit_list:[{postit_id:1,contents:"안녕하세요 포스트1111이에요.",status:"ing",pos_X:100,pos_Y:200},{postit_id:2,contents:"안녕하세요 포스트2222이에요.",status:"todo",pos_X:300,pos_Y:200},{postit_id:3,contents:"안녕하세요 포스트3333이에요.",status:"complete",pos_X:500,pos_Y:200}],total_count:3,todo_count:1,ing_count:1,complete_count:1};localStorage.setItem("postit_page_1",JSON.stringify(a)),localStorage.setItem("postit_page_2",JSON.stringify(a));var s,r=document.querySelector(".app"),c=document.querySelector(".postit-stk"),u=document.querySelector(".page-nav");new function(t){this.pageList=[],this.$Page=t.querySelector(".main-section");var e=localStorage.getItem("page_list");e&&(this.pageList=JSON.parse(e))}(r),new t(c),new i(u),document.addEventListener("mouseup",(function(t){document.removeEventListener("mousemove",o),t.preventDefault();var e=document.querySelector(".postit.hold");e&&(e.removeAttribute("gap-x"),e.removeAttribute("gap-y"),e.classList.remove("hold"))})),s=document.querySelectorAll(".postit"),console.log(s,"!!!"),s.forEach((function(t,e){var i=t.getAttribute("priority");i||(i=e+1,t.setAttribute("priority",i)),t.style["z-index"]=i,t.addEventListener("mousedown",n)}))})();