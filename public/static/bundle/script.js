(()=>{var t={484:function(t){t.exports=function(){"use strict";var t=6e4,e=36e5,n="millisecond",s="second",o="minute",i="hour",a="day",r="week",d="month",c="quarter",u="year",l="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,n){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),s=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+m(s,2,"0")+":"+m(o,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var s=12*(n.year()-e.year())+(n.month()-e.month()),o=e.clone().add(s,d),i=n-o<0,a=e.clone().add(s+(i?-1:1),d);return+(-(s+(n-o)/(i?o-a:a-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:d,y:u,w:r,d:a,D:l,h:i,m:o,s,ms:n,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},y="en",$={};$[y]=g;var S=function(t){return t instanceof b},P=function t(e,n,s){var o;if(!e)return y;if("string"==typeof e){var i=e.toLowerCase();$[i]&&(o=i),n&&($[i]=n,o=i);var a=e.split("-");if(!o&&a.length>1)return t(a[0])}else{var r=e.name;$[r]=e,o=r}return!s&&o&&(y=o),o||!s&&y},_=function(t,e){if(S(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new b(n)},T=v;T.l=P,T.i=S,T.w=function(t,e){return _(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var b=function(){function g(t){this.$L=P(t.locale,null,!0),this.parse(t)}var m=g.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(T.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match(p);if(s){var o=s[2]-1||0,i=(s[7]||"0").substring(0,3);return n?new Date(Date.UTC(s[1],o,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)):new Date(s[1],o,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return T},m.isValid=function(){return!(this.$d.toString()===h)},m.isSame=function(t,e){var n=_(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return _(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<_(t)},m.$g=function(t,e,n){return T.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,c=!!T.u(e)||e,h=T.p(t),p=function(t,e){var s=T.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return c?s:s.endOf(a)},f=function(t,e){return T.w(n.toDate()[t].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},g=this.$W,m=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(h){case u:return c?p(1,0):p(31,11);case d:return c?p(1,m):p(0,m+1);case r:var $=this.$locale().weekStart||0,S=(g<$?g+7:g)-$;return p(c?v-S:v+(6-S),m);case a:case l:return f(y+"Hours",0);case i:return f(y+"Minutes",1);case o:return f(y+"Seconds",2);case s:return f(y+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var r,c=T.p(t),h="set"+(this.$u?"UTC":""),p=(r={},r[a]=h+"Date",r[l]=h+"Date",r[d]=h+"Month",r[u]=h+"FullYear",r[i]=h+"Hours",r[o]=h+"Minutes",r[s]=h+"Seconds",r[n]=h+"Milliseconds",r)[c],f=c===a?this.$D+(e-this.$W):e;if(c===d||c===u){var g=this.clone().set(l,1);g.$d[p](f),g.init(),this.$d=g.set(l,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[T.p(t)]()},m.add=function(n,c){var l,h=this;n=Number(n);var p=T.p(c),f=function(t){var e=_(h);return T.w(e.date(e.date()+Math.round(t*n)),h)};if(p===d)return this.set(d,this.$M+n);if(p===u)return this.set(u,this.$y+n);if(p===a)return f(1);if(p===r)return f(7);var g=(l={},l[o]=t,l[i]=e,l[s]=1e3,l)[p]||1,m=this.$d.getTime()+n*g;return T.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var s=t||"YYYY-MM-DDTHH:mm:ssZ",o=T.z(this),i=this.$H,a=this.$m,r=this.$M,d=n.weekdays,c=n.months,u=function(t,n,o,i){return t&&(t[n]||t(e,s))||o[n].slice(0,i)},l=function(t){return T.s(i%12||12,t,"0")},p=n.meridiem||function(t,e,n){var s=t<12?"AM":"PM";return n?s.toLowerCase():s},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:r+1,MM:T.s(r+1,2,"0"),MMM:u(n.monthsShort,r,c,3),MMMM:u(c,r),D:this.$D,DD:T.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,d,2),ddd:u(n.weekdaysShort,this.$W,d,3),dddd:d[this.$W],H:String(i),HH:T.s(i,2,"0"),h:l(1),hh:l(2),a:p(i,a,!0),A:p(i,a,!1),m:String(a),mm:T.s(a,2,"0"),s:String(this.$s),ss:T.s(this.$s,2,"0"),SSS:T.s(this.$ms,3,"0"),Z:o};return s.replace(f,(function(t,e){return e||g[t]||o.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,l,h){var p,f=T.p(l),g=_(n),m=(g.utcOffset()-this.utcOffset())*t,v=this-g,y=T.m(this,g);return y=(p={},p[u]=y/12,p[d]=y,p[c]=y/3,p[r]=(v-m)/6048e5,p[a]=(v-m)/864e5,p[i]=v/e,p[o]=v/t,p[s]=v/1e3,p)[f]||v,h?y:T.a(y)},m.daysInMonth=function(){return this.endOf(d).$D},m.$locale=function(){return $[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),s=P(t,e,!0);return s&&(n.$L=s),n},m.clone=function(){return T.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},g}(),L=b.prototype;return _.prototype=L,[["$ms",n],["$s",s],["$m",o],["$H",i],["$W",a],["$M",d],["$y",u],["$D",l]].forEach((function(t){L[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),_.extend=function(t,e){return t.$i||(t(e,b,_),t.$i=!0),_},_.locale=P,_.isDayjs=S,_.unix=function(t){return _(1e3*t)},_.en=$[y],_.Ls=$,_.p={},_}()}},e={};function n(s){var o=e[s];if(void 0!==o)return o.exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=function(){function t(t,e,n){this.$Nav=t,this.state=e,this.props=n,this.$NavContainer=this.$Nav.querySelector(".page-nav-tab"),this.$NavAddButton=this.$Nav.querySelector(".add-tab-button"),this.$NavCalenderButton=this.$Nav.querySelector(".calender-button"),this.$NavAddButton.addEventListener("click",this.props.addNewPage),this.setState(e)}return t.prototype.setState=function(t){this.state=t,this.render()},t.prototype.render=function(){var t=this,e=this.state,n=e.pageList,s=e.selectedPageId;this.$NavContainer.innerHTML="\n    ".concat(n.map((function(t,e){return"<div class='tab ".concat(s===t.id?"selected":"","' id=\"").concat(t.id,'">\n        <p>').concat(t.pageName,'</p>\n        <input class="tab-name-form" style="display:none" type="text" />\n        <div class="tab-delete-button" id="').concat(t.id,'">🗑</div>\n        </div>\n        ')})).join(""),"\n    "),this.$Nav.querySelectorAll(".tab").forEach((function(e){var n=e.childNodes[1],o=e.childNodes[3],i=e.childNodes[5],a=Number(i.id);i.addEventListener("click",(function(e){e.stopPropagation(),t.props.deletePage(a)})),e.addEventListener("click",(function(e){e.stopPropagation(),s!==a&&t.props.clickPageTab(a)})),e.addEventListener("dblclick",(function(e){e.stopPropagation(),n.style.display="none",o.style.display="",null==o||o.focus(),null==o||o.addEventListener("focusout",(function(e){n.style.display="",o.style.display="none",t.props.updateTab(a,o.value)}))})),i.addEventListener}))},t}();const e=t;var s={PAGE_LIST:"page_list",POSTIT_PAGE:"postit_page"};const o={STORAGE_KEYS:s,STATUS_TEXT:{todo:{color:"#778899",text:"TODO"},doing:{color:"#1b64de",text:"DOING.."},done:{color:"#035400",text:"DONE!"}},STATUS_CODE:{1:"todo",2:"doing",3:"done",todo:1,doing:2,done:3},STATUS_BG_COLOR:{todo:"#fff6c1",doing:"#bdcfe4",done:"#94dbc5"}};function i(t,e){var n=JSON.stringify(e);localStorage.setItem(t,n)}function a(t){return JSON.parse(localStorage.getItem(t))}var r=n(484),d=n.n(r);function c(t){if("postit-delete-button"!==t.target.className){document.addEventListener("mousemove",u);var e=t.target.parentElement,n=document.querySelectorAll(".postit"),s=e.classList;if(!s.contains("hold")){var o=t.clientX,i=t.clientY,a=e.getBoundingClientRect(),r=o-a.x,d=i-a.y;e.setAttribute("gap-x",String(r)),e.setAttribute("gap-y",String(d));var c=String((n.length>0?Math.max.apply(null,Array.from(n).map((function(t){return Number(t.getAttribute("priority"))}))):9999)+1);e.setAttribute("priority",c),e.style.zIndex=c,s.add("hold")}}}function u(t){t.preventDefault();var e=document.querySelector(".postit.hold");if(e){var n=t.clientX,s=t.clientY,o=e.getAttribute("gap-x"),i=e.getAttribute("gap-y"),a=n-Number(o),r=s-Number(i);e.style.left=a+"px",e.style.top=r+"px"}}const l=function(t,e,n){var s,i,a,r=this;this.setState=function(t){r.state=t,r.props.setBgColor(r.state),r.props.setTextColor(r.state),r.props.updateStatus(r.state)},this.$ProgressToggle=t,this.state=e,this.props=n,this.$ProgressToggle.value=String(o.STATUS_CODE[e]),null===(s=this.$ProgressToggle)||void 0===s||s.addEventListener("mousedown",(function(t){return t.stopPropagation()})),null===(i=this.$ProgressToggle)||void 0===i||i.addEventListener("mouseup",(function(t){return t.stopPropagation()})),null===(a=this.$ProgressToggle)||void 0===a||a.addEventListener("change",(function(t){var e;return r.setState(null===(e=r.$ProgressToggle)||void 0===e?void 0:e.value)}))},h=function(){function t(t,e){var n=t.postit_id,s=t.contents,i=void 0===s?"":s,a=t.status,r=t.pos_X,c=t.pos_Y,u=t.created_date,h=t.doing_date,p=t.done_date,f=this;this.dbClickPostit=function(t){var e,n=t.target,s=null===(e=n.parentElement)||void 0===e?void 0:e.querySelector(".postit-contents-form");s.style.display="",n.style.display="none",null==s||s.focus(),null==s||s.addEventListener("focusout",(function(t){n.style.display="",s.style.display="none",f.setContetns(s.value)}))},this.setContetns=function(t){f.$PostItContents.innerHTML="".concat(t),f.state.contents=t,f.props.updatePostit()},this.updateStatus=function(t){var e=o.STATUS_CODE[t];f.state.status=e;var n=d()().format("YYYY-MM-DD HH:mm");switch(e){case"todo":f.state.doing_date=null,f.state.done_date=null;break;case"doing":f.state.doing_date=n,f.state.done_date&&(f.state.done_date=null);break;case"done":f.state.done_date=n,f.state.doing_date||(f.state.doing_date=n)}f.props.updatePostit(),f.props.reRenderPage({})},this.setBgColor=function(t){var e=o.STATUS_CODE[t];f.$Postit.style.backgroundColor=o.STATUS_BG_COLOR[e],f.props.updatePostit()},this.setTextColor=function(t){var e=o.STATUS_CODE[t];f.$PostItStatus.innerText=o.STATUS_TEXT[e].text,f.$PostItStatus.style.color=o.STATUS_TEXT[e].color},this.state={postit_id:n,contents:i,status:a,pos_X:r,pos_Y:c,created_date:u,doing_date:h,done_date:p},this.props=e,this.$Postit=document.createElement("div"),this.$Postit.classList.add("postit"),this.$Postit.id=String(n),this.$Postit.style.left=r+"px",this.$Postit.style.top=c+"px",this.$Postit.style.background=o.STATUS_BG_COLOR[this.state.status],this.$Postit.innerHTML='\n      <div class="postit-top-area">\n        <div class="postit-status"></div>\n        <input\n          class="process-toggle-button"\n          type="range"\n          id="RangeFilter"\n          min="1"\n          max="3"\n          value="1"\n          style=""\n        />\n        <div class="postit-delete-button">🗑</div>\n      </div>\n      <pre class="postit-contents-area">'.concat(i,'</pre>\n      <textarea class="postit-contents-form" value="').concat(i,'" style="display: none;"></textarea>\n    '),this.$PostItContents=this.$Postit.querySelector(".postit-contents-area"),this.$PostItForm=this.$Postit.querySelector(".postit-contents-form"),this.$PostItForm.value=i,this.$PostItContents.addEventListener("dblclick",this.dbClickPostit),this.dbClickPostit=this.dbClickPostit.bind(this),this.setContetns=this.setContetns.bind(this),this.$PostItStatus=this.$Postit.querySelector(".postit-status"),this.$PostItStatus.innerText=o.STATUS_TEXT[this.state.status].text,this.$PostItStatus.style.color=o.STATUS_TEXT[this.state.status].color,this.$PostItDeleteButton=this.$Postit.querySelector(".postit-delete-button"),this.$PostItDeleteButton.addEventListener("mouseup",(function(t){return t.stopPropagation()})),this.$PostItDeleteButton.addEventListener("click",(function(t){t.stopPropagation(),f.props.deletePostit(t,f.state.postit_id)})),this.processToggle=new l(this.$Postit.querySelector(".process-toggle-button"),this.state.status,{setBgColor:this.setBgColor,setTextColor:this.setTextColor,updateStatus:this.updateStatus})}return t.prototype.setState=function(){this.render()},t.prototype.getState=function(){},t.prototype.render=function(){this.$Postit},t}();var p=function(){function t(t,e,n){var o=this;this.postitList=[],this.postitLastId=1,this.addNewPostIt=function(t){var e=t.clientX,n=t.clientY,a=Number(t.dataTransfer.getData("startX")),r=Number(t.dataTransfer.getData("startY")),c=new h({postit_id:(o.postitLastId+=1,o.postitLastId),status:"todo",pos_X:e-a,pos_Y:n-r,created_date:d()().format("YYYY-MM-DD HH:mm"),doing_date:null,done_date:null},{updatePostit:o.updatePostit,deletePostit:o.deletePostit,reRenderPage:o.props.reRenderPage});o.postitLastId=o.postitList.push(c),i("".concat(s.POSTIT_PAGE,"_").concat(o.state.selectedPageId),o.postitList),o.setState(o.state),o.props.reRenderPage(o.state)},this.deletePostit=function(t,e){t.stopPropagation(),t.preventDefault();var n=o.postitList.findIndex((function(t){return t.state.postit_id===e}));-1!==n&&o.postitList.splice(n,1)[0].$Postit.remove(),i("".concat(s.POSTIT_PAGE,"_").concat(o.state.selectedPageId),o.postitList),o.props.reRenderPage(o.state),o.render()},this.$Page=t,this.state=e,this.props=n,this.addNewPostIt=this.addNewPostIt.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.updatePostit=this.updatePostit.bind(this),this.setState=this.setState.bind(this),this.$PostItContainer=this.$Page.querySelector(".postit-container"),this.$PostItBody=this.$Page.querySelector(".postit-body"),document.addEventListener("dragstart",(function(t){t.dataTransfer.setData("startX","".concat(t.clientX-22)),t.dataTransfer.setData("startY","".concat(t.clientY-74))})),document.addEventListener("dragover",(function(t){return t.preventDefault()})),document.addEventListener("drop",this.addNewPostIt),this.setState(e)}return t.prototype.fetchData=function(t){var e=this,n=a("".concat(s.POSTIT_PAGE,"_").concat(t));n||(i("".concat(s.POSTIT_PAGE,"_").concat(t),[]),n=[]);var o=n.length,r=0,d=0;this.postitList=n.map((function(t){switch(t.state.postit_id>e.postitLastId&&(e.postitLastId=t.state.postit_id),t.state.status){case"doing":r++;break;case"done":d++}return new h({postit_id:t.state.postit_id,status:t.state.status,contents:t.state.contents,pos_X:t.state.pos_X,pos_Y:t.state.pos_Y,created_date:t.state.created_date,doing_date:t.state.doing_date,done_date:t.state.done_date},{updatePostit:e.updatePostit,deletePostit:e.deletePostit,reRenderPage:e.props.reRenderPage})})),this.state.selectedPageInfo.totalCount=o,this.state.selectedPageInfo.doingCount=r,this.state.selectedPageInfo.doneCount=d},t.prototype.setState=function(t){this.state=t,this.fetchData(this.state.selectedPageId),this.render()},t.prototype.render=function(){var t=this;this.$PostItBody.innerHTML="",this.postitList.forEach((function(e,n){t.$PostItBody.appendChild(e.$Postit)})),this.drowPostit()},t.prototype.drowPostit=function(){var t=this;document.querySelectorAll(".postit").forEach((function(e,n){var s=e.getAttribute("priority");s||(s=n+1,e.setAttribute("priority",s)),e.style["z-index"]=s,e.addEventListener("mousedown",c),e.addEventListener("mouseup",t.handleMouseUp)}))},t.prototype.updatePostit=function(){i("".concat(s.POSTIT_PAGE,"_").concat(this.state.selectedPageId),this.postitList)},t.prototype.handleMouseUp=function(t){t.preventDefault();var e=t.target.parentElement,n=e.id,o=e.style,a=this.postitList.find((function(t){return t.state.postit_id===Number(n)}));if(a){a.state.pos_X=parseInt(o.left),a.state.pos_Y=parseInt(o.top),i("".concat(s.POSTIT_PAGE,"_").concat(this.state.selectedPageId),this.postitList),document.removeEventListener("mousemove",u);var r=document.querySelector(".postit.hold");r&&(r.removeAttribute("gap-x"),r.removeAttribute("gap-y"),r.classList.remove("hold"))}},t}();const f=p;var g=function(){function t(t,e){var n=this;this.donePercent=0,this.doingPercent=0,this.fetchProcess=function(){var t=n.state.selectedPageInfo,e=t.totalCount,s=t.doingCount,o=t.doneCount;n.doingPercent=e?s/e*100:0,n.donePercent=e?o/e*100:0},this.setState=function(t){n.state=t,n.fetchProcess(),n.render()},this.$ProgressBar=t,this.$Doing=this.$ProgressBar.querySelector(".progress-doing"),this.$Done=this.$ProgressBar.querySelector(".progress-done"),this.$DoneRate=this.$ProgressBar.querySelector(".done-rate"),this.state=e,this.setState(e)}return t.prototype.render=function(){this.$DoneRate.innerText=Math.floor(this.donePercent)+"% 완료",this.$Doing.style.width=this.doingPercent+"%",this.$Done.style.width=this.donePercent+"%"},t}();const m=g,v=function(t,e,n){var s=this;this.domState={},this.checkSchedule=function(t,e){var n=d()().format("YYYY-MM-DD"),o=d()(t.created_date).format("YYYY-MM-DD"),i=d()(t.done_date).format("YYYY-MM-DD"),a=d()(o).diff(s.date,"day"),r=d()(i).diff(s.date,"day"),c=d()(s.date).diff(n,"day");return!(!(a<=0)||c>0||!isNaN(r)&&r<=0&&0!==r)},this.setColor=function(t){var e=s.date.split("-"),n=e[0],o=e[1],i=e[2];s.domState.color="#ffe200",s.domState.start="0",s.domState.end="0";var a=d()(t.created_date).diff("".concat(n,"-").concat(o,"-").concat(i),"day"),r=d()(t.doing_date).diff("".concat(n,"-").concat(o,"-").concat(i),"day"),c=d()(t.done_date).diff("".concat(n,"-").concat(o,"-").concat(i),"day");a<=0&&(s.domState.color="#ffe200",0===a&&(s.domState.star=5)),!isNaN(r)&&r<=0&&(s.domState.color="#0152cc"),!isNaN(c)&&c<=0&&(s.domState.color="#34b37e",0===c&&(s.domState.end=5))},this.getDailyElement=function(){var t=d()().format("YYYY-MM-DD");return s.$dailyElement.innerHTML='\n      <div class="date" style="background-color:'.concat(0===d()(s.date).diff(t,"day")?"#fff6c1":"#fff",';">').concat(s.date.split("-")[2],"</div>\n    "),s.postitList.forEach((function(t,e){var n=s.checkSchedule(t,e);s.setColor(t);var o=n?s.domState.color:"#fff",i=document.createElement("div");i.classList.add("date-contents"),i.style.backgroundColor=n?"#d0cfcf":"#fff",i.style.borderStartStartRadius=s.domState.start+"px",i.style.borderEndEndRadius=s.domState.end+"px",i.innerHTML='\n        <div class="daily-state" style="border-top: 3px solid '.concat(o,';" ></div>\n      '),s.$dailyElement.appendChild(i)})),s.$dailyElement},this.date=t,this.$dailyElement=document.createElement("li"),this.$dailyElement.classList.add("date-wrapper"),this.$dailyElement.style.width=e+"%",this.postitList=JSON.parse(JSON.stringify(n)),this.postitList.reverse()};const y=function(t,e,n){var s=this;this.monthEndDay=[31,28,31,30,31,30,31,31,30,31,30,31],this.dailyScheduleJob=[],this.scheduleList=[],this.checkLeapYear=function(t){return t%400==0||t%100!=0&&t%4==0},this.changeYearMonth=function(){return t=s,e=void 0,o=function(){var t,e,n,s;return function(t,e){var n,s,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(o=2&i[0]?s.return:i[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,i[1])).done)return o;switch(s=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,s=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],s=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,(function(o){for(t=this.monthEndDay[this.month-1],2===this.month&&this.isLeap&&(t=29),e=(100/t).toFixed(2),n=1;n<=t;n++)s=n<10?"0"+n:n,this.scheduleList.push(new v("".concat(this.year,"-").concat(this.month,"-").concat(s),e,this.postitList));return this.render(),[2]}))},new((n=void 0)||(n=Promise))((function(s,i){function a(t){try{d(o.next(t))}catch(t){i(t)}}function r(t){try{d(o.throw(t))}catch(t){i(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,r)}d((o=o.apply(t,e||[])).next())}));var t,e,n,o},this.render=function(){s.scheduleList.forEach((function(t){s.$monthList.appendChild(t.getDailyElement())}))},this.getMonthWrapper=function(){return s.changeYearMonth(),s.scheduleList=[],s.$monthWrapper.innerHTML="",s.$monthWrapper.appendChild(s.$monthTitle),s.$monthWrapper.appendChild(s.$monthList),s.$monthWrapper},this.postitList=n,this.month=Number(e<10?"0"+e:e),this.year=t,this.isLeap=this.checkLeapYear(t),this.$monthWrapper=document.createElement("li"),this.$monthWrapper.classList.add("month-wrapper"),this.$monthTitle=document.createElement("div"),this.$monthTitle.classList.add("month-title"),this.$monthTitle.innerText="".concat(t,"년 ").concat(e,"월"),this.$monthList=document.createElement("div"),this.$monthList.classList.add("month")};const $=function(){var t=this;this.state={postitList:[],minDateTime:"",maxDateTime:d()().format("YYYY-MM"),monthList:[],dateOptions:{}},this.show=function(){return e=t,n=void 0,o=function(){return function(t,e){var n,s,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(o=2&i[0]?s.return:i[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,i[1])).done)return o;switch(s=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,s=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],s=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,(function(t){return this.fetchData(),this.$CalenderModal.style.display="",this.$CalenderModalDimmed.style.display="",[2]}))},new((s=void 0)||(s=Promise))((function(t,i){function a(t){try{d(o.next(t))}catch(t){i(t)}}function r(t){try{d(o.throw(t))}catch(t){i(t)}}function d(e){var n;e.done?t(e.value):(n=e.value,n instanceof s?n:new s((function(t){t(n)}))).then(a,r)}d((o=o.apply(e,n||[])).next())}));var e,n,s,o},this.hide=function(){t.$CalenderModal.style.display="none",t.$CalenderModalDimmed.style.display="none",t.state={postitList:[],minDateTime:"",maxDateTime:d()().format("YYYY-MM"),monthList:[],dateOptions:{}}},this.fetchData=function(){var e=t.state.postitList;a(s.PAGE_LIST).forEach((function(t){a("".concat(s.POSTIT_PAGE,"_").concat(t.id)).forEach((function(t){var n=t.state;e.push(n)}))})),e.sort((function(t,e){var n=d()(t.created_date).year(),s=d()(e.created_date).year();if(n>s)return 1;if(n<s)return-1;var o=d()(t.created_date).month(),i=d()(e.created_date).month();return o>i?1:o<i?-1:d()(t.created_date).date()>d()(e.created_date).date()?1:-1})),t.state.minDateTime=d()(e[0].created_date).format("YYYY-MM");for(var n=d()(t.state.maxDateTime).diff(t.state.minDateTime,"year"),o=Number(d()(t.state.minDateTime).format("YYYY")),i=Number(d()(t.state.minDateTime).format("MM")),r=Number(d()(t.state.maxDateTime).format("YYYY")),c=Number(d()(t.state.maxDateTime).format("MM")),u=o;u<=o+n;u++){t.state.dateOptions[u]||(t.state.dateOptions[u]={});for(var l=u===o?i:1;l<=12;l++){var h=!!t.state.dateOptions[u][l];if(u===r&&l===c+1)break;h||(t.state.dateOptions[u][l]=l,t.state.monthList.push(new y(u,l,e)))}}t.render()},this.render=function(){t.$ScheduleWrapper.innerHTML="",t.state.monthList.forEach((function(e,n){t.$ScheduleWrapper.appendChild(e.getMonthWrapper())}))},this.checkLeapYear=function(t){return t%400==0||t%100!=0&&t%4==0},this.$CalenderModal=document.querySelector(".calender-modal"),this.$CalenderModalDimmed=document.querySelector(".calender-dimmed"),this.$CalenderCloseButton=this.$CalenderModal.querySelector(".modal-close-button"),this.$ScheduleWrapper=document.querySelector(".schedule-wrapper"),this.$CalenderModalDimmed.addEventListener("click",this.hide),this.$CalenderCloseButton.addEventListener("click",this.hide),this.hide()};var S=function(){return S=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},S.apply(this,arguments)};const P=function(t,n){var o=this;this.addNewPage=function(){var t=o.state,e=t.pageList,n=t.maxPageId,a=(o.state=S(S({},o.state),{maxPageId:n+1}),o.state.maxPageId);e.push({id:a,pageName:"untitled_".concat(a),totalCount:0,doingCount:0,doneCount:0}),o.state.selectedPageId=o.state.maxPageId,i(s.PAGE_LIST,e),o.setState(o.state)},this.updateTab=function(t,e){if(e){var n=o.state.pageList.find((function(e){return e.id===t}));n.pageName=e;var a=S(S({},o.state),{selectedPageInfo:n});i(s.PAGE_LIST,o.state.pageList),o.setState(a)}},this.deletePage=function(t){var e=o.state,n=e.pageList,a=e.selectedPageId,r=n.findIndex((function(e){return e.id===t}));if(a===t){if(1===n.length)return void alert("마지막 페이지는 삭제할 수 없습니다.");o.state.selectedPageId=n[r-1].id}var d,c=n.splice(r,1)[0];i(s.PAGE_LIST,n),d="".concat(s.POSTIT_PAGE,"_").concat(c.id),localStorage.removeItem(d),o.setState(o.state)},this.clickPageTab=function(t){var e=S(S({},o.state),{selectedPageId:t,selectedPageInfo:o.state.pageList.find((function(e){return e.id===t}))});o.setState(e)},this.setState=function(t){o.state=S(S({},o.state),t),o.NavComponent.setState(o.state),o.BodyComponent.setState(o.state),o.ProgressBarComponent.setState(o.state)},this.$App=t,this.state=n,this.HeaderComponent=this.$App.querySelector(".postit-header"),this.$CalenderButton=this.$App.querySelector(".calender-button"),this.NavComponent=new e(this.$App.querySelector(".postit-page-nav"),this.state,{addNewPage:this.addNewPage,deletePage:this.deletePage,clickPageTab:this.clickPageTab,updateTab:this.updateTab}),this.BodyComponent=new f(this.$App.querySelector(".postit-body-page"),this.state,{reRenderPage:this.setState}),this.ProgressBarComponent=new m(this.$App.querySelector(".postit-progress-bar"),this.state),this.CalenderComponent=new $,this.$CalenderButton.addEventListener("click",(function(t){o.CalenderComponent.show()}))};i(s.PAGE_LIST,[{id:1,pageName:"포스트잇 개발",totalCount:1,doingCount:0,doneCount:0}]),i("".concat(s.POSTIT_PAGE,"_").concat(1),[{state:{postit_id:10,contents:"\n메인페이지 개발\n- 네비\n- 메인\n- 모달",status:"done",pos_X:909,pos_Y:126,created_date:"2022-03-10 21:36",doing_date:"2022-03-11 21:37",done_date:"2022-03-18 21:43"}},{state:{postit_id:11,contents:"\n프로세스바 개발\n- 포스트잇 삭제\n- 포스트잇 수정\n- 포스트잇 추가",status:"done",pos_X:1022,pos_Y:311,created_date:"2022-03-12 21:36",doing_date:"2022-04-01 21:37",done_date:"2022-04-10 21:43"}},{state:{postit_id:12,contents:"\n캘린더 개발\n- Fetch데이터\n- 가로로 그리기",status:"done",pos_X:975,pos_Y:200,created_date:"2022-04-20 21:37",doing_date:"2022-04-20 21:37",done_date:"2022-04-20 21:43"}},{state:{postit_id:15,contents:"\n애니메이션 개선\n\n- 포스트잇 상태 변경 \n배경변경 애니메이션\n- 코드 리팩토링",status:"todo",pos_X:298,pos_Y:144,created_date:"2022-03-20 21:37",doing_date:null,done_date:null}},{state:{postit_id:16,contents:"\n타입스크립트 공부하기",status:"doing",pos_X:577,pos_Y:141,created_date:"2022-03-20 21:37",doing_date:"2022-04-01 21:43",done_date:null}},{state:{postit_id:18,contents:"리엑트 & Nextjs\n공부하기",status:"doing",pos_X:671,pos_Y:328,created_date:"2022-04-10 21:37",doing_date:"2022-04-20 21:43",done_date:null}},{state:{postit_id:20,contents:"\n디자인 & 기능 개선\n\n- 앱 전반적인 디자인\n- 포스트잇 토글 디자인\n- 추가 기능들?",status:"todo",pos_X:335,pos_Y:272,created_date:"2022-04-20 21:38",doing_date:null,done_date:null}}]);var _,T=document.querySelector(".app"),b={pageList:[]};(_=a(s.PAGE_LIST))||i(s.PAGE_LIST,_=[{id:1,pageName:"untitled",totalCount:0,doingCount:0,doneCount:0}]),b.pageList=_,b.lastPageId=_[_.length-1].id,b.selectedPageId=_[_.length-1].id,b.selectedPageInfo=_[_.length-1],b.maxPageId=Math.max.apply(Math,_.map((function(t){return t.id}))),new P(T,b)})()})();