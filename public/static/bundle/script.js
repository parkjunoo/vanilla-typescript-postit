(()=>{"use strict";var t=function(){function t(t,e,s){this.$Nav=t,this.state=e,this.props=s,this.$NavContainer=this.$Nav.querySelector(".page-nav-tab"),this.$NavAddButton=this.$Nav.querySelector(".add-tab-button"),this.$NavAddButton.addEventListener("click",this.props.addNewPage),this.setState(e)}return t.prototype.setState=function(t){this.state=t,this.render()},t.prototype.render=function(){var t=this,e=this.state,s=e.pageList,n=e.selectedPageId;this.$NavContainer.innerHTML="\n    ".concat(s.map((function(t,e){return"<div class='tab ".concat(n===t.id?"selected":"","'>\n        ").concat(t.page_name,'\n        <div class="tab-delete-button" id="').concat(t.id,'">🗑</div>\n        </div>')})).join(""),"\n    "),this.$Nav.querySelectorAll(".tab").forEach((function(e){var s=e.childNodes[1];s.addEventListener("click",(function(){return t.props.deletePage(Number(s.id))})),e.addEventListener("click",(function(){return t.props.clickPageTab(Number(s.id))}))}))},t}();const e=t;var s="page_list",n="postit_page";function a(t,e){var s=JSON.stringify(e);localStorage.setItem(t,s)}function o(t){return JSON.parse(localStorage.getItem(t))}const i=function(){function t(t){var e=t.postit_id,s=t.contents,n=t.status,a=t.pos_X,o=t.pos_Y;this.postit_id=e,this.contents=s,this.status=n,this.pos_X=a,this.pos_Y=o}return t.prototype.setState=function(){this.render()},t.prototype.getState=function(){},t.prototype.render=function(){},t}();var c=function(){function t(t,e,s){this.PostitList=[],this.$Page=t,this.state=e,this.props=s;var n=this.state.selectedPageId;this.fetchData(n),this.setState(e)}return t.prototype.fetchData=function(t){var e=o("".concat(n,"_").concat(t));console.log(e),e||a("".concat(n,"_").concat(t),[]),this.PostitList=e.map((function(t){return console.log("@@@@@@",t),new i({postit_id:t.postit_id,status:t.status,contents:t.contents,pos_X:t.pos_X,pos_Y:t.pos_Y})})),console.log("!!!",this.PostitList)},t.prototype.setState=function(t){this.state=t,this.state.selectedPageId,this.render()},t.prototype.render=function(){},t}();const r=c;var p=function(){return p=Object.assign||function(t){for(var e,s=1,n=arguments.length;s<n;s++)for(var a in e=arguments[s])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},p.apply(this,arguments)};const d=function(t,n){var o=this;this.addNewPage=function(){var t=o.state,e=t.pageList,n=t.maxPageId;e.push({id:(o.state=p(p({},o.state),{maxPageId:n+1}),o.state.maxPageId),page_name:"untitled",total_count:0,todo_count:0,ing_count:0,complete_count:0}),o.state.selectedPageId=o.state.maxPageId,a(s,e),o.NavComponent.setState(o.state)},this.deletePage=function(t){var e=o.state.pageList,n=e.findIndex((function(e){return e.id===t}));e.splice(n,1),a(s,e),o.NavComponent.setState(o.state)},this.clickPageTab=function(t){var e=p(p({},o.state),{selectedPageId:t});o.NavComponent.setState(e),o.BodyComponent.setState(e)},this.$App=t,this.state=n,this.HeaderComponent=this.$App.querySelector(".postit-header"),this.NavComponent=new e(this.$App.querySelector(".postit-page-nav"),this.state,{addNewPage:this.addNewPage,deletePage:this.deletePage,clickPageTab:this.clickPageTab}),this.BodyComponent=new r(this.$App.querySelector(".postit-body-page"),this.state,{})};localStorage.setItem("postit_page_1",JSON.stringify([{postit_id:1,contents:"안녕하세요 포스트1111이에요.",status:"ing",pos_X:100,pos_Y:200},{postit_id:2,contents:"안녕하세요 포스트2222이에요.",status:"todo",pos_X:300,pos_Y:200},{postit_id:3,contents:"안녕하세요 포스트3333이에요.",status:"complete",pos_X:500,pos_Y:200}]));var u,h=document.querySelector(".app"),l={};(u=o(s))||a(s,u=[{id:1,page_name:"untitled",total_count:0,todo_count:0,ing_count:0,complete_count:0}]),l.pageList=u,l.lastPageId=u[u.length-1].id,l.selectedPageId=u[u.length-1].id,l.maxPageId=Math.max.apply(Math,u.map((function(t){return t.id}))),new d(h,l)})();